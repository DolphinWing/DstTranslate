name: Voidria.Voidria.NAME
description: Voidria.Voidria.DESCRIPTION
asteroidIcon: asteroid_voidria
disableWorldTraits: true

worldTraitScale: 1.00
worldsize:
  X: 160
  Y: 274
layoutMethod: PowerTree # Note: We need to add weights to the items in the layer in order to use this.

defaultsOverrides:
  startingWorldElements: [] # remove the algae check

# List all the subworld files to load
subworldFiles:
  - name: subworlds/forest/Forest
  - name: subworlds/forest/ForestStart
  - name: subworlds/space/Space
  - name: subworlds/space/Surface
    weight: 0.25
  - name: expansion1::subworlds/space/SpaceWithFrozenBorder
    weight: 0.25
  - name: expansion1::subworlds/space/SpaceWithAbyssaliteBorder
    weight: 0.5

startSubworldName: subworlds/forest/ForestStart
startingBaseTemplate: bases/forestBase

seasons:
  - ClassicStyleWarpMeteorShowers
  - GassyMooteorShowers
  - RegolithMoonMeteorShowers

# Specify where subworlds can spawn. These rules are processed in order and their effects are cumulative.
unknownCellsAllowedSubworlds: 
  - tagcommand: Default
    command: Replace
    subworldNames:
      - subworlds/forest/Forest
  - tagcommand: DistanceFromTag
    tag: AtStart
    minDistance: 1
    maxDistance: 999
    command: Replace
    subworldNames:
      - subworlds/space/Space
  # Core
  - tagcommand: DistanceFromTag
    tag: AtDepths
    minDistance: 0
    maxDistance: 0
    command: Replace
    subworldNames:
      - subworlds/space/Space
  # Space
  - tagcommand: AtTag
    tag: AtSurface
    command: Replace
    subworldNames:
      - subworlds/space/Space
  # Surface
  - tagcommand: DistanceFromTag
    tag: AtSurface
    minDistance: 1
    maxDistance: 1
    command: Replace
    subworldNames:
      - subworlds/space/Space
      - subworlds/space/Surface
      - expansion1::subworlds/space/SpaceWithFrozenBorder
      - expansion1::subworlds/space/SpaceWithAbyssaliteBorder

worldTemplateRules:
  # Gravitas
  - names:
      - expansion1::poi/genericGravitas/poi_genetics_lab
    listRule: GuaranteeAll
    priority: 500
    allowedCellsFilter:
      - command: Replace
        tagcommand: DistanceFromTag
        tag: AtSurface
        minDistance: 1
        maxDistance: 99
      - command: ExceptWith
        tagcommand: AtTag
        tag: NoGravitasFeatures
  # poi opener
  - names:
      - expansion1::poi/poi_temporal_tear_opener_lab
    listRule: GuaranteeAll
    priority: 201
    allowExtremeTemperatureOverlap: true # This is acceptable
    allowedCellsFilter:
      - command: Replace
        tagcommand: DistanceFromTag
        tag: AtSurface
        minDistance: 2
        maxDistance: 2
  # Exp. 52B
  - names:
    - expansion1::poi/sap_tree_room
    listRule: GuaranteeOne
    times: 1
    allowDuplicates: false
    priority: 200
    allowedCellsFilter:
    - command: Replace
      tagcommand: DistanceFromTag
      tag: AtDepths
      minDistance: 0
      maxDistance: 0
  # Curated geysers
  - names:
    - geysers/molten_iron
    listRule: GuaranteeOne
    times: 1
    allowDuplicates: false
    priority: 50
    allowedCellsFilter:
    - command: Replace
      tagcommand: DistanceFromTag
      tag: AtDepths
      minDistance: 0
      maxDistance: 0
  # Oil
  - names:
    - poi/oil/small_oilpockets_geyser_a
    - poi/oil/small_oilpockets_geyser_b
    - poi/oil/small_oilpockets_geyser_c
    - poi/oil/small_oilpockets_geyser_d
    - poi/oil/small_oilpockets_geyser_e
    - poi/oil/small_oilpockets_geyser_f
    - poi/oil/small_oilpockets_geyser_g
    - poi/oil/small_oilpockets_geyser_h
    listRule: GuaranteeOne
    times: 1
    allowDuplicates: false # be more flexible due to high temperature borders
    priority: 100
    allowedCellsFilter:
    - command: Replace
      tagcommand: DistanceFromTag
      tag: AtDepths
      minDistance: 0
      maxDistance: 0
  # GeneShuffler
  - names:
    - expansion1::poi/frozen/frag_neuro
    - expansion1::poi/frozen/lab_basement_small
    - expansion1::poi/regolith/bunker_lab
    - poi/frozen/lab_basement
    - poi/frozen/lab_splitroom
    - poi/hotmarsh/lab_burrow
    - poi/hotmarsh/lab_splitroom
    - poi/jungle/buttongate
    - poi/jungle/lab_poolbottom
    - poi/jungle/lab_poolbottom_frozen
    - poi/poi_dupe_sensor_puzzle
    - poi/poi_oil_switchdoor
    listRule: GuaranteeOne
    priority: 90
    allowExtremeTemperatureOverlap: true
    allowedCellsFilter:
      - command: Replace
        tagcommand: DistanceFromTag
        tag: AtStart
        minDistance: 3
        maxDistance: 5
  # Crashed Satelite
  - names:
      - expansion1::poi/traits/crashed_satellite1
      - expansion1::poi/traits/crashed_satellite2
      - expansion1::poi/traits/crashed_satellite3
      - expansion1::poi/traits/crashed_satellite4
    listRule: GuaranteeOne
    useRelaxedFiltering: true
    allowExtremeTemperatureOverlap: true # should be fine near the surface
    allowedCellsFilter:
      - command: Replace
        tagcommand: DistanceFromTag
        tag: AtStart
        minDistance: 1
        maxDistance: 3